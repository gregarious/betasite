{% comment %}
Inner template for an account/profile management form.
Context variables:
    account_forms:
        profile_form: form object
        credentials_form: form object
        preferences_form: form object    
{% endcomment %}

<h2 class="detail-section-title">{{user.username}}'s Account</h2>
<form method="post" action="">
{% csrf_token %}
<fieldset>
	<legend>Profile</legend>
	<p class="tip">This information will appear publicly on your profile.</p>
	{% with form=account_forms.profile_form %}
	<ul>
		<li class="field-container">
			<div class="field-label">
				{{form.display_name.label_tag}}
			</div>
			<div class="field">
				{{form.display_name}}
				<p class="tip">Leave blank to use your username.</p>
				{{form.display_name.errors}}
			</div>
		</li> <!-- display_name -->

		<li class="field-container">
			<div class="field-label">
				{{form.gender.label_tag}}
			</div>
			<div class="field grouped-field-row">
				<div>
					{{form.gender}}
				</div> <!-- gender -->
				<div>
					{{form.birth_year.label_tag}}
				</div>
				<div>
					{{form.birth_year}}
				</div> <!-- birth_year -->
				{{form.birth_year.errors}}
			</div>
		</li>  <!-- gender & birth_year -->
		
		<li class="field-container">
			<div class="field-label">
				{{form.neighborhood.label_tag}}
			</div>
			<div class="field">
				{{form.neighborhood}}
				{{forn.neighborhood.errors}}
			</div>
		</li> <!-- neighborhood -->
		
		<li class="field-container">
			<div class="field-label">
				{{form.avatar_url.label_tag}}
			</div>
			<div class="field">
				{{form.avatar_url}}
				{{form.avatar_url.errors}}
			</div>
		</li> <!-- avatar_url -->

		<li class="field-container">
			<div class="field-label">
				{{form.twitter_username.label_tag}}
			</div>
			<div class="field">
				<div class="social-input">
		        	{{form.twitter_username}}
		        	{{form.twitter_username.errors}}
		            <img src="{{STATIC_URL}}img/icons/twitter.png" alt="Twitter icon" />
		        </div>
			</div>	
		</li> <!-- twitter_username -->
		{% endwith %}

	</ul>
</fieldset>

<fieldset id="account-privacy">
	<legend>Privacy</legend>
	<p class="tip">By default, your public profile page will show the places you favorite and the coupons you have purchased. You can opt in to make your events public.</p>
	<ul>
		{% with form=account_forms.preferences_form %}
		<li class="field-container">
			<div class="third">
				<label name="{{form.public_favorites.html_name}}">Favorited Places</label>
				{{form.public_favorites}}
			</div> <!-- public_favorites -->

			<div class="third">
				<label name="{{form.public_attendance.html_name}}">Events</label>
				{{form.public_attendance}}
			</div> <!-- public_attendance -->

			<div class="third">
				<label name="{{form.public_coupons.html_name}}">My Coupons</label>
				{{form.public_coupons}}
			</div> <!-- public_coupons -->
		</li>
		{% endwith %}
	</ul>
</fieldset>

<fieldset>
	<legend>Email and password</legend>
	<p class="tip">Change your email and password here.</p>
	<ul>
		{% with form=account_forms.credentials_form %}
		<li class="field-container">
			<div class="field-label">
				{{form.email.label_tag}}
			</div>
			<div class="field">
				{{form.email}}
			</div>
		</li> <!-- email -->
		<li class="field-container">
			<div class="field-label">
				{{form.current_password.label_tag}}
			</div>
			<div class="field">
				{{form.current_password}}
			</div>
		</li> <!-- current_password -->

		<li class="field-container">
			<div class="field-label">
				{{form.new_password.label_tag}}
			</div>
			<div class="field">
				{{form.new_password}}
			</div>
		</li> <!-- new_password -->

		<li class="field-container">
			<div class="field-label">
				{{form.confirm_new_password.label_tag}}
			</div>
			<div class="field">
				{{form.confirm_new_password}}
			</div>
		</li> <!-- confirm_new_password -->
		{% endwith %}
	</ul>
</fieldset>

<input type="submit" value="Save Changes" class="right"/>

</form>