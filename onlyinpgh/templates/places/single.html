{% comment %}
Inner template that renders details about a single place.

Corresponding ViewModel: places.viewmodels.PlaceDetail 

Context variables:
    place:      		Place object with extra fields (e.g. url, hours)
    is_favorite:		boolean (optional)
    tag_list:			a TagList RenderableViewModel
    featured_special: 	Offer object (optional)
    directions_link:	Google Maps link (optional)
{% endcomment %}

{% load self_render from viewmodel_tags %}

<header class="single-header">		
	<h2 class="single-title">{{ place.name }}</h2>
	<div class="single-thumb-container">
		<img alt="{{ place.name }}" src="{{ place.image_url }}" height="500" width="500" />
	</div>
	<div class="single-details">
		<ul>
			{% if place.location.address %}
				<li class="address">
				{{ place.location.address }}
				{% if directions_link %}
					<a href="{{directions_link}}">(directions)</a>
				{% endif %}
				</li>
			{% endif %}

			{% if place.hours %}
		 		<li>{{ place.hours }}</li>
		 	{% endif %}

		 	{% if place.phone %}
		  		<li>Phone: {{ place.phone }}</li>
			{% endif %}

			<li>Parking: Street</li>

			{% if place.url %}
				<li><a href="{{ place.url }}">Visit our website</a></li>
			{% endif %}

		</ul>
	</div>
	{% self_render tag_list %}
</header>

<section class="single-content">
	<ul>
		{% if is_favorite %}
			<li><a href="?action=unfav" class="unfavorite-action">Remove from Favorites</a></li>
		{% else %}
			<li><a href="?action=fav" class="favorite-action">Add to Favorites</a></li>
		{% endif %}
		<li><a href="#">Report a problem</a></li>
		<li><a href="#">Post to chatter</a></li>
	</ul>

	{% if place.description %}	
	  	<p>{{ place.description|linebreaksbr|truncatewords:50|urlizetrunc:20 }}</p>	  	
	{% endif %}

	{% if featured_special %}
		<div class="single-featured-special">
			{{featured_special.description}}
			<a href="{% url offers-item-detail featured_special.id %}">Grab it!</a>
		</div>
	{% endif %}

</section>
