{% extends "base.html" %}
{% load thumbnail %}
{% load compressed %}
{% block head-stylesheets %}
<link rel="stylesheet" type="text/css" href="/static/css/style.css?v=1">
{% endblock %}

{% block head-scripts %}
<script type="text/javascript"
  src="//maps.googleapis.com/maps/api/js?key=AIzaSyC7INTXYluYDoz0yZRX89jLORKJEGeQeCY&sensor=false">
</script>
{% endblock %}

{% block content %}
<div id='feed'>
    <div>Number 1</div>
    <div>Number 2</div>
    <div>Number 3</div>
</div>
<div id="map_canvas" style="width:100%; height:100%"></div>
{% endblock %}

{% block foot-libs %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="{{STATIC_URL}}js/libs/jquery-1.7.2.min.js"><\/script>')</script>
 <!-- 
<script type="text/javascript" src="{{STATIC_URL}}js/plugins.js"></script> -->
{% compressed_js 'all_libs' %}
{% compressed_js 'templates' %}
<script src="{{STATIC_URL}}js/mapscript.js"></script>
<script type="text/javascript">
$(function(){
    console.log('hi');
    var theMap = new window.Scenable.feed.Map(document.getElementById('map_canvas'), 40.44417, -79.94583);
    theMap.addItem(40.44717, -79.94583, '/static/img/markers/place-marker.png','number 1');
    theMap.addItem(40.44417, -79.94583, '/static/img/markers/place-marker.png','number 2');
    theMap.addItem(40.44117, -79.94583, '/static/img/markers/place-marker.png','number 3');
    window.Scenable.feed.linkFeedToMap($('#feed').children(),theMap);
    {% if places_json %}
    // var allPlaceData = {{places_json|safe}};
    // _.each(allPlaceData, function(data) {
    //     window.Scenable.map.addPlace(theMap, data);
    // });
    {% endif %}

    // $('#newplace').click(function(){
    //     $.getJSON('/testbed/ajax/newplace', function(data) {
    //         window.Scenable.map.addPlace(theMap, data);
    //     });
    // });

    // $('#newevent').click(function(){
    //     $.getJSON('/testbed/ajax/newevent', function(data) {
    //         window.Scenable.map.addEvent(theMap, data);
    //     });
    // });
});
</script>
{% endblock %}
