{% extends 'page.html' %}

{% block main-content %}
    <h2>Search</h2>

    <form method="get" action="{% url site-search %}">
        <table>
            {# form has one field: a text field called "q" #}
            {{ form.as_table }}
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="submit" value="Search">
                </td>
            </tr>
        </table>

        {% if query %}
            {% if results %}
                <h3>Places</h3>
                <ul class="feed">
                {% for result in results.places %}
                    <li class="item"><a href="{{result.object.get_absolute_url}}">{{result.object.name}}</a></li>
                {% empty %}
                <p>None found.</p>
                {% endfor %}
                </ul>

                <h3>Events</h3>
                <ul class="feed">
                {% for result in results.events %}
                    <li class="item"><a href="{{result.object.get_absolute_url}}">{{result.object.name}}</a></li>
                {% empty %}
                <p>None found.</p>
                {% endfor %}
                </ul>

                <h3>Specials</h3>
                <ul class="feed">
                {% for result in results.specials %}
                    <li class="item"><a href="{{result.object.get_absolute_url}}">{{result.object.title}}</a></li>
                {% empty %}
                <p>None found.</p>
                {% endfor %}
                </ul>

                <h3>News</h3>
                <ul class="feed">
                {% for result in results.news_articles %}
                    <li class="item">{{result.object.title}}</li>
                {% empty %}
                <p>None found.</p>
                {% endfor %}
                </ul>

                <h3>Chatter</h3>
                <ul class="feed">
                {% for result in results.chatter_posts %}
                    <li class="item">{{result.object.content}}</li>
                {% empty %}
                <p>None found.</p>
                {% endfor %}
                </ul>
            {% else %}  {# no results #}
                <p>No results.</p>
            {% endif %}

        {% else %}
            {# Show some example queries to run, maybe query syntax, something else? #}
        {% endif %}
    </form>
{% endblock %}